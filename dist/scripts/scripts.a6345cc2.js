function notifyMe(){if(!Notification)return void alert("Desktop notifications not available in your browser. Try Chromium.");if("granted"!==Notification.permission)Notification.requestPermission();else{var a=new Notification("Notification title",{icon:"http://cdn.sstatic.net/stackexchange/img/logos/so/so-icon.png",body:"Hey there! You've been notified!"});a.onclick=function(){window.open("http://stackoverflow.com/a/13328397/1269037")}}}document.addEventListener("DOMContentLoaded",function(){"granted"!==Notification.permission&&Notification.requestPermission()});var favicon={change:function(a){2==arguments.length&&(document.title=optionalDocTitle),this.addLink(a,"icon"),this.addLink(a,"shortcut icon"),console.log(a)},addLink:function(a,b){var c=document.createElement("link");c.type="image/x-icon",c.rel=b,c.href=a,this.removeLinkIfExists(b),this.docHead.appendChild(c)},removeLinkIfExists:function(a){for(var b=this.docHead.getElementsByTagName("link"),c=0;c<b.length;c++){var d=b[c];if("image/x-icon"==d.type&&d.rel==a)return void this.docHead.removeChild(d)}},docHead:document.getElementsByTagName("head")[0]};angular.module("toxicApp",["ngAnimate","ngCookies","ngResource","ngRoute","ngSanitize","ngTouch"]).config(["$routeProvider","$locationProvider",function(a,b){a.when("/",{templateUrl:"views/main.html",controller:"MainCtrl"}).when("/test",{templateUrl:"views/test.html",controller:"MainCtrl"}).otherwise({redirectTo:"/"}),b.html5Mode(!0)}]),angular.module("toxicApp").controller("MainCtrl",["$scope","$timeout",function(a,b){var c=new Firebase("https://brilliant-fire-9601.firebaseio.com/"),d=c.child("rooms"),e=null;a.rooms=[],a.onCount=function(){for(var c=0;c<a.rooms.length;c++)a.rooms[c].time+=1e3;e=b(a.onCount,1e3)},d.on("child_added",function(c){b(function(){var d=c.val();a.rooms.push({empty:d.empty,time:0,key:c.key()}),2==a.rooms.length&&a.updateFavicon(),e||(e=b(a.onCount,1e3))})}),d.on("child_changed",function(c){b(function(){var b=c.val(),d=$.grep(a.rooms,function(a){return a.key==c.key()})[0];d.empty=b.empty,d.time=0,a.updateFavicon()})}),a.updateFavicon=function(){var b=1==a.rooms[0].empty?1:0,c=1==a.rooms[1].empty?1:0;favicon.change("images/favicon/"+b+c+".ico")},a.toggleRoom=function(a){d.child(a.key).update({empty:!a.empty})},a.getClass=function(a){return 1==a.empty?"empty":"busy"},a.getRoomPosition=function(a){return 1==a.key?"left":"right"}}]);